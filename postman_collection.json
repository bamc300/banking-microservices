{
  "info": {
    "_postman_id": "b6a6c4f0-1234-4567-8901-abcdef123456",
    "name": "Banking Microservices",
    "description": "Colección para probar los microservicios de Clientes-Personas y Cuentas-Movimientos.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Clientes (ms-clientes-personas)",
      "item": [
        {
          "name": "1. Crear Cliente",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Jose Lema\",\n  \"genero\": \"MASCULINO\",\n  \"edad\": 30,\n  \"identificacion\": \"1234567890\",\n  \"direccion\": \"Otavalo sn y principal\",\n  \"telefono\": \"098254785\",\n  \"contrasena\": \"1234\"\n}"
            },
            "url": {
              "raw": "{{url_clientes}}/clientes",
              "host": [
                "{{url_clientes}}"
              ],
              "path": [
                "clientes"
              ]
            },
            "description": "Crea un nuevo cliente en el sistema."
          },
          "response": []
        },
        {
          "name": "2. Obtener Todos los Clientes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_clientes}}/clientes",
              "host": [
                "{{url_clientes}}"
              ],
              "path": [
                "clientes"
              ]
            },
            "description": "Lista todos los clientes registrados."
          },
          "response": []
        },
        {
          "name": "3. Obtener Cliente por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_clientes}}/clientes/:clienteId",
              "host": [
                "{{url_clientes}}"
              ],
              "path": [
                "clientes",
                ":clienteId"
              ],
              "variable": [
                {
                  "key": "clienteId",
                  "value": "UUID_DEL_CLIENTE",
                  "description": "ID del cliente (UUID)"
                }
              ]
            },
            "description": "Obtiene los detalles de un cliente específico."
          },
          "response": []
        },
        {
          "name": "4. Actualizar Cliente",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"Jose Lema Actualizado\",\n  \"genero\": \"MASCULINO\",\n  \"edad\": 31,\n  \"identificacion\": \"1234567890\",\n  \"direccion\": \"Otavalo sn y principal modificado\",\n  \"telefono\": \"098254785\",\n  \"contrasena\": \"5678\"\n}"
            },
            "url": {
              "raw": "{{url_clientes}}/clientes/:clienteId",
              "host": [
                "{{url_clientes}}"
              ],
              "path": [
                "clientes",
                ":clienteId"
              ],
              "variable": [
                {
                  "key": "clienteId",
                  "value": "UUID_DEL_CLIENTE",
                  "description": "ID del cliente a actualizar"
                }
              ]
            },
            "description": "Actualiza la información personal de un cliente."
          },
          "response": []
        },
        {
          "name": "5. Inactivar Cliente (Validación Saldo)",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{url_clientes}}/clientes/:clienteId/inactivar",
              "host": [
                "{{url_clientes}}"
              ],
              "path": [
                "clientes",
                ":clienteId",
                "inactivar"
              ],
              "variable": [
                {
                  "key": "clienteId",
                  "value": "UUID_DEL_CLIENTE",
                  "description": "ID del cliente a inactivar"
                }
              ]
            },
            "description": "Inactiva un cliente. Validará que NO tenga cuentas con saldo positivo."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Cuentas (ms-cuentas-movimientos)",
      "item": [
        {
          "name": "1. Crear Cuenta",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"numeroCuenta\": \"478758\",\n  \"tipoCuenta\": \"AHORROS\",\n  \"saldoInicial\": 2000,\n  \"estado\": true,\n  \"clienteId\": \"UUID_DEL_CLIENTE\"\n}"
            },
            "url": {
              "raw": "{{url_cuentas}}/cuentas",
              "host": [
                "{{url_cuentas}}"
              ],
              "path": [
                "cuentas"
              ]
            },
            "description": "Crea una nueva cuenta asociada a un cliente."
          },
          "response": []
        },
        {
          "name": "2. Obtener Cuentas por Cliente",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_cuentas}}/cuentas/cliente/:clienteId",
              "host": [
                "{{url_cuentas}}"
              ],
              "path": [
                "cuentas",
                "cliente",
                ":clienteId"
              ],
              "variable": [
                {
                  "key": "clienteId",
                  "value": "UUID_DEL_CLIENTE",
                  "description": "ID del cliente"
                }
              ]
            },
            "description": "Lista todas las cuentas de un cliente."
          },
          "response": []
        },
        {
          "name": "3. Inactivar Cuenta (Retiro Automático)",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{url_cuentas}}/cuentas/:cuentaId/inactivar",
              "host": [
                "{{url_cuentas}}"
              ],
              "path": [
                "cuentas",
                ":cuentaId",
                "inactivar"
              ],
              "variable": [
                {
                  "key": "cuentaId",
                  "value": "UUID_DE_LA_CUENTA",
                  "description": "ID de la cuenta a inactivar"
                }
              ]
            },
            "description": "Inactiva una cuenta. Si tiene saldo, crea un retiro automático por el total."
          },
          "response": []
        },
        {
          "name": "4. Validar Inactivación (Internal)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_cuentas}}/cuentas/validacion-inactivacion/:clienteId",
              "host": [
                "{{url_cuentas}}"
              ],
              "path": [
                "cuentas",
                "validacion-inactivacion",
                ":clienteId"
              ],
              "variable": [
                {
                  "key": "clienteId",
                  "value": "UUID_DEL_CLIENTE",
                  "description": "ID del cliente"
                }
              ]
            },
            "description": "Endpoint interno usado para validar si un cliente puede ser inactivado."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Movimientos (ms-cuentas-movimientos)",
      "item": [
        {
          "name": "1. Registrar Depósito",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tipoMovimiento\": \"DEPOSITO\",\n  \"valor\": 500.00,\n  \"cuentaId\": \"UUID_DE_LA_CUENTA\"\n}"
            },
            "url": {
              "raw": "{{url_cuentas}}/movimientos",
              "host": [
                "{{url_cuentas}}"
              ],
              "path": [
                "movimientos"
              ]
            },
            "description": "Registra un depósito en una cuenta."
          },
          "response": []
        },
        {
          "name": "2. Registrar Retiro",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tipoMovimiento\": \"RETIRO\",\n  \"valor\": 100.00,\n  \"cuentaId\": \"UUID_DE_LA_CUENTA\"\n}"
            },
            "url": {
              "raw": "{{url_cuentas}}/movimientos",
              "host": [
                "{{url_cuentas}}"
              ],
              "path": [
                "movimientos"
              ]
            },
            "description": "Registra un retiro de una cuenta (valida saldo disponible)."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Reportes (ms-cuentas-movimientos)",
      "item": [
        {
          "name": "1. Reporte Estado de Cuenta",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{url_cuentas}}/reportes?fechaInicio=2024-01-01&fechaFin=2025-12-31&clienteId=UUID_DEL_CLIENTE",
              "host": [
                "{{url_cuentas}}"
              ],
              "path": [
                "reportes"
              ],
              "query": [
                {
                  "key": "fechaInicio",
                  "value": "2024-01-01",
                  "description": "Fecha inicio (YYYY-MM-DD)"
                },
                {
                  "key": "fechaFin",
                  "value": "2025-12-31",
                  "description": "Fecha fin (YYYY-MM-DD)"
                },
                {
                  "key": "clienteId",
                  "value": "UUID_DEL_CLIENTE",
                  "description": "ID del cliente"
                }
              ]
            },
            "description": "Genera un reporte de estado de cuenta detallado por fechas."
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "url_clientes",
      "value": "http://localhost:8081",
      "type": "string"
    },
    {
      "key": "url_cuentas",
      "value": "http://localhost:8082",
      "type": "string"
    }
  ]
}